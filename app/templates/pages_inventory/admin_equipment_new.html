{% extends 'base/base_admin.html' %}
{% block title %}เพิ่มอุปกรณ์{% endblock %}
{% set CATEGORIES = ["IT & คอมพิวเตอร์","อุปกรณ์อิเล็กทรอนิกส์/วิศวกรรม","โสตทัศนศึกษา","กีฬา","สำนักงาน "] %}

{% block content %}
<style>@import url("{{ url_for('static', filename='css/admin_equipment_new.css') }}?v=5");</style>

<div class="page">
  <div class="panel">
    <div class="card">
      <div class="card__header">
        <h1>เพิ่มอุปกรณ์</h1>
      </div>

      {% with errors = get_flashed_messages(with_categories=true, category_filter=['error']) %}
        {% if errors %}
          {% set message = errors[-1][1] %}
          <div style="
            max-width:640px; margin:16px auto 0; padding:12px 16px;
            background:#ffebee; color:#b71c1c;
          ">
            {{ message }}
          </div>
        {% endif %}
      {% endwith %}

      <div class="card__body">
        <form action="{{ url_for('inventory.admin_equipment_new') }}" method="post" enctype="multipart/form-data">
          <div class="row">
            <label>ชื่ออุปกรณ์ *</label>
            <input class="ctrl" type="text" name="name" required>
          </div>

          <div class="row">
            <label>รหัส/หมายเลข *</label>
            <input class="ctrl" type="text" name="code" required>
          </div>

          <div class="row">
            <label>หมวดหมู่</label>
            <select class="ctrl" name="category">
              <option value="">— เลือกหมวดหมู่ —</option>
              {% for c in CATEGORIES %}
                <option value="{{ c }}">{{ c }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="row">
            <label>ยี่ห้อ</label>
            <input class="ctrl" type="text" name="brand">
          </div>

          <div class="row">
            <label>รายละเอียด</label>
            <textarea class="ctrl" name="detail"></textarea>
          </div>

          <div class="row">
            <label>วันที่ซื้อ</label>
            <input class="ctrl" type="date" name="buy_date">
          </div>

          <div class="row">
            <label>สถานะ</label>
            <select class="ctrl" name="status">
              <option value="">— เลือกสถานะ —</option>
              <option value="available">พร้อมใช้งาน</option>
              <option value="in_use">กำลังถูกยืม</option>
              <option value="broken">ชำรุด</option>
              <option value="lost">สูญหาย</option>
            </select>
          </div>

          <div class="row">
            <label style="font-weight:600;">การอนุมัติจากอาจารย์</label>
            <div class="radio-group">
              <label class="radio-option">
                <input type="radio" name="require_teacher_approval" value="1">
                ต้องขออนุมัติ
              </label>
              <label class="radio-option">
                <input type="radio" name="require_teacher_approval" value="0" checked>
                ไม่ต้องขออนุมัติ
              </label>
            </div>
          </div>

          <div class="row">
            <label>แนบรูปภาพ</label>
            <input class="ctrl" type="file" name="image" accept="image/*">
          </div>

          <div class="btns">
            <a class="btn" href="{{ url_for('inventory.admin_equipment_list') }}">ยกเลิก</a>
            <button type="submit" class="btn primary">บันทึก</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}