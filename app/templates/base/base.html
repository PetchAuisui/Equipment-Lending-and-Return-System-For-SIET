<!doctype html>
<html lang="th">
  <head>
    <meta charset="utf-8" />
    <title>{% block title %}Equipment Lending{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/app.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    {% block head %}{% endblock %}
  </head>
  <body>
    {% include 'base/_navbar.html' %}

    <!-- Page frame: ทำให้ทุกหน้ามี layout เหมือนกัน -->
    <main class="page">
      {% if self.page_title() %}
        <header class="page-header">
          <h1>{% block page_title %}{% endblock %}</h1>
        </header>
      {% endif %}

      <section class="page-body">
        {% block content %}{% endblock %}
      </section>
    </main>

    {% block scripts %}{% endblock %}


    <script>
    document.addEventListener("DOMContentLoaded", () => {
      if (localStorage.getItem("showLoginAlert") === "1") {
        localStorage.removeItem("showLoginAlert");

        Swal.fire({
          position: 'top',
          icon: 'warning',
          title: 'กรุณาเข้าสู่ระบบก่อนทำการยืมอุปกรณ์', // ✅ บรรทัดเดียว
          toast: true,
          showConfirmButton: false,
          timer: 3000,             // ✅ หายหลัง 3 วิ
          timerProgressBar: true,  // ✅ แถบเวลา
          background: '#fffbe6',
          color: '#444',
          width: 'auto',           // ✅ ให้ขนาดพอดีข้อความ
          padding: '10px 20px',
          customClass: {
            popup: 'login-toast'
          },
          didOpen: (popup) => {
            popup.style.animation = "fadeDown 0.5s ease, fadeOut 0.8s ease 2.2s"; // ✅ ลง + ค่อยๆ หาย
          }
        });
      }
    });

    // ✅ เพิ่ม animation fadeDown (เข้า) + fadeOut (ออก)
    const style = document.createElement("style");
    style.textContent = `
    @keyframes fadeDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeOut {
      from { opacity: 1; transform: translateY(0); }
      to { opacity: 0; transform: translateY(-10px); }
    }

    /* ✅ ปรับให้ข้อความไม่ตัดบรรทัด + ดูพอดี */
    .login-toast {
      white-space: nowrap !important;
      text-align: center !important;
      font-size: 14px !important;
      border: 1px solid #ffd966 !important;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      border-radius: 8px !important;
    }
    `;
    document.head.appendChild(style);
    </script>


  </body>
</html>
