<nav class="navbar">

  <!-- แถวบน: Brand + ปุ่ม user (แถบสีชมพู) -->
  <div class="navbar_login">

    <div class="nav-left">
      <a class="brand" href="{{ url_for('pages.home') }}">
        <img
          src="{{ url_for('static', filename='images/logo.png') }}"
          alt="SEIT Equipment"
          style="height: 45px; vertical-align: middle; object-fit: contain;">
      </a>
    </div>

    <div class="nav-right">

      {% if current_user.is_authenticated %}

        {# ===== ปุ่ม Admin (ของเดิม) ===== #}
        {% if session.get('role') in ['staff', 'admin'] %}
          {% if request.path.startswith('/admin') %}
            <a href="{{ url_for('pages.home') }}" class="btn-nav btn-admin">Member</a>
          {% else %}
            <a href="{{ url_for('admin.admin_home') }}" class="btn-nav btn-admin">Admin</a>
          {% endif %}
        {% endif %}

        {# ===== ✅ ปุ่ม Instructor (ครอบคลุมหลายเคส) ===== #}
        {% set role  = session.get('role') %}
        {% set mtype = session.get('member_type') %}
        {% set empid = session.get('employee_id') %}

        {% if role in ['teacher','instructor'] or mtype == 'teacher' or empid %}
          {% if request.path.startswith('/instructor') %}
            <a href="{{ url_for('pages.home') }}" class="btn-nav btn-admin">Back</a>
          {% else %}
            <a href="{{ url_for('instructor.teacher_home') }}" class="btn-nav btn-admin">Instructor</a>
          {% endif %}
        {% endif %}

        <a href="{{ url_for('auth.logout_action') }}" class="btn-nav btn-logout">Logout</a>

        <span class="user_identity">
          {{ (current_user.email or '') | replace('@kmitl.ac.th','') }}
          <i class="ri-user-line"></i>
        </span>

      {% else %}
        <div class="navbar_login_text">
          <a href="{{ url_for('auth.login_page') }}">Login</a>
          <span class="divider">|</span>
          <a href="{{ url_for('auth.register_page') }}">Sign in</a>
        </div>
      {% endif %}

    </div>
  </div>

  <!-- แถวล่าง: เมนูหลัก + Search (ซ่อนเมื่ออยู่ใน /admin) -->
  {% if not request.path.startswith('/admin') %}
    <div class="navbar_menu">

      <div class="menu-left">
        <a href="{{ url_for('pages.home') }}">Home</a>
        <a href="{{ url_for('inventory.lend_device') }}">Equipment</a>
        <a href="{{ url_for('tracking.track_index') }}">Track Status</a>
        <a href="{{ url_for('pages.policy') }}">Policy</a>
        <a href="{{ url_for('pages.about_us') }}">About Us</a>
      </div>

      <div class="navbar_light">
        <button class="btn-bell" aria-label="Notifications">
          <i class="ri-notification-4-line"></i>
        </button>
      </div>

    </div>
  {% endif %}

</nav>